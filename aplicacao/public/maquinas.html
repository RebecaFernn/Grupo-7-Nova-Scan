<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maquinas - Dashboard</title>

    <link rel="stylesheet" href="./css/maquinas.css">
    <link rel="stylesheet" href="./css/navBarDash.css">

    <!-- FONTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body onload="listarMaquinas()">
    <div class="pgMaquinas">

        <div class="NavBar">
            <div class="topNavBar">
                NOVASCAN
            </div>
            <div class="midNavBar">
                <div class="links" onclick="overview()">
                    <img src="./img/overview.svg" alt="">
                    <a href="overview.html">Overview</a>
                </div>
                <div class="links" onclick="maquinas()">
                    <img src="./img/selfchekout.svg" alt="">
                    <a href="maquinas.html">Self-Checkouts</a>
                </div>
                <div class="links" onclick="colaboradores()">
                    <img src="./img/colaboradores.svg" alt="">
                    <a href="colaboradores.html">Colaboradores</a>
                </div>
                <div class="links" onclick="editarPerfil()">
                    <img src="./img/editPerfil.svg" alt="">
                    <a href="editar_perfil.html">Editar Perfil</a>
                </div>
                <div class="links" onclick="metricas()">
                    <img src="./img/metricas.svg" alt="">
                    <a href="#">Personalizar alertas</a>
                </div>
            </div>
            <div class="lowNavBar">
                <img src="./img/LogoBranca.svg" class="imgLow">
                <div class="links" onclick="index()">
                    <img src="./img/sair.svg" alt="">
                    <a href="#">Logout</a>
                </div>
            </div>
        </div>
        <div class="conteudoMaquinas">
            <div class="topmaquinas">
                <h2>Máquinas Self-Checkout</h2>
            </div>
            <div class="boxmaquinas">
                <div class="maquinasOK" onclick="maquina()">
                    <p>Self-Checkout 1</p>
                    <img src="./img/ok.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinasOK" onclick="maquina()">
                    <p>Self-Checkout 2</p>
                    <img src="./img/ok.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinasOK" onclick="maquina()">
                    <p>Self-Checkout 3</p>
                    <img src="./img/ok.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinasOK" onclick="maquina()">
                    <p>Self-Checkout 4</p>
                    <img src="./img/ok.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 5</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 6</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 7</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 8</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 9</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div>
            </div>
        </div>


        <div onclick="fecharInfomaquina()" class="fundoInformacoesmaquina" id="fundoInformacoesmaquina">
            <div class="informacoesdaMaquina" onclick="pararPropagacao()">
                <div class="box-btn">
                    <button onclick="renomear()" class="btn-renomearSelf">Renomear Self-Checkout <img
                            src="./img/rename.svg" alt=""></button>
                    <button class="btn-ativar"> Ativar máquina </button>
                    <button class="btn-desativar"> Desativar máquina </button>
                    <button class="btn-renomearSelf" onclick="grafico()"> Monitoramento em tempo real </button>
                </div>
                <div class="box-informacoes">
                    <div class="left-informacoes">
                        <h2>Informações máquina</h2>
                        <div class="top-info">
                            <p> <strong>Nome da máquina:</strong> Self-Checkout 1</p>
                            <p> <strong>Processador</strong> Intel i5 - 3470</p>
                            <p> <strong>Total Núcleos:</strong> 4 Núcleos</p>
                            <p> <strong>Total Mémoria Ram:</strong> 16 GB</p>
                            <p> <strong>Total Armazenamento:</strong> 1024 GB</p>
                        </div>
                        <h2>Alertas associados</h2>
                        <div class="low-info">
                            <div class="top-low">

                                <p><strong>Intervalo Máximo:</strong> 50</p>
                                <p><strong>Intervalo Minimo:</strong> 20</p>
                                <p><strong>Descrição:</strong> Alerta para o uso de CPU</p>

                            </div>
                            <div class="mid-low">


                                <p><strong>Intervalo Máximo:</strong> 6</p>
                                <p><strong>Intervalo Minimo:</strong> 1</p>
                                <p><strong>Descrição:</strong> Alerta para o uso de RAM</p>


                            </div>
                            <div class="low-low">
                                <p><strong>Intervalo Máximo:</strong> 1</p>
                                <p><strong>Intervalo Minimo:</strong> 0</p>
                                <p><strong>Descrição:</strong> Alerta para perda de pacotes na rede</p>
                            </div>
                        </div>
                    </div>
                    <div class="right-informacoes">
                        <h2>Problemas ocorridos</h2>
                        <div class="alertas-right">
                            <p><strong>Alto uso de CPU: 90% - 17/10/2024 13:46:20</strong></p>
                            <p><strong>Alto uso de RAM: 95% - 19/10/2024 17:46:20</strong></p>
                            <p><strong>Alta Perda de Pacote: 3% - 20/12/2024 10:46:20</strong></p>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div onclick="fecharInfomaquina()" class="fundoInfomaquina" id="fundoInfomaquina">
            <div class="infomaquina" onclick="pararPropagacao()">

                <!-- ------ cpu -------- -->
                <div class="box-btn-voltar">
                    <button onclick="voltar()" class="btn-voltar"><img src="./img/voltar.svg" alt=""> Voltar </button>
                </div>
                <div class="boxInfoCPU">
                    <div class="boxFichaCPU">

                        <div class="CPU" id="CPU">
                            <div class="tituloCPU">
                                <h2>CPU</h2>
                            </div>

                            <div class="usoCPU" id="usoCPU">

                            </div>
                        </div>

                        <div class="boxVelocidade">
                            <div class="tituloVelocidade">
                                Velocidade
                            </div>
                            <div class="velocidade" id="velocidade">

                            </div>
                        </div>
                        <div class="boxNucleos">
                            <div class="titulosNucleos">
                                Nucleos lógicos
                            </div>
                            <div class="qtdNucleos">
                                4
                            </div>
                        </div>
                    </div>

                    <div class="boxGrafico">
                        <canvas id="meuGrafico"></canvas>
                    </div>

                </div>

                <!-- MEMÓRIA RAM -->
                <div class="boxInfoCPU">
                    <div class="boxFichaCPU">

                        <div class="CPU" id="CPU">
                            <div class="tituloCPU">
                                <h2>RAM</h2>
                            </div>

                            <div class="usoCPU" id="usoRAM">

                            </div>
                        </div>

                        <div class="boxVelocidade">
                            <div class="tituloVelocidade">
                                Em uso
                            </div>
                            <div class="velocidade" id="RAMemuso">

                            </div>
                        </div>
                        <div class="boxNucleos">
                            <div class="titulosNucleos">
                                Total
                            </div>
                            <div class="qtdNucleos">
                                16GB
                            </div>
                        </div>
                    </div>

                    <div class="boxGrafico">
                        <canvas id="meuGrafico2"></canvas>
                    </div>

                </div>

                <!-- ARMAZENAMENTO -->
                <div class="boxInfoCPU">
                    <div class="boxFichaCPU">

                        <div class="CPU" id="CPU">
                            <div class="tituloCPU">
                                <h2>MEM</h2>
                            </div>

                            <div class="usoCPU" id="usoMEM">

                            </div>
                        </div>

                        <div class="boxVelocidade">
                            <div class="tituloVelocidade">
                                Em uso
                            </div>
                            <div class="velocidade" id="MEMemuso">

                            </div>
                        </div>
                        <div class="boxNucleos">
                            <div class="titulosNucleos">
                                Total
                            </div>
                            <div class="qtdNucleos">
                                1024GB
                            </div>
                        </div>
                    </div>

                    <div class="boxGrafico">
                        <canvas id="meuGrafico3"></canvas>
                    </div>

                </div>

                <div class="boxInfoCPU">
                    <div class="boxFichaCPU">

                        <div class="REDE" id="CPU">
                            <div class="tituloREDE">
                                <h2>REDE</h2>
                            </div>

                            <div class="usoCPU" id="usoCPU">

                            </div>
                        </div>

                        <div class="boxVelocidade">
                            <div class="tituloVelocidade">
                                Pacotes enviados
                            </div>
                            <div class="velocidade" id="enviados">

                            </div>
                        </div>
                        <div class="boxNucleos">
                            <div class="titulosNucleos">
                                Pacotes recebidos
                            </div>
                            <div class="velocidade" id="recebidos">

                            </div>
                        </div>
                        <div class="boxVelocidade">
                            <div class="tituloVelocidade">
                                Pacotes perdidos
                            </div>
                            <div class="velocidade" id="perdidos">

                            </div>
                        </div>
                    </div>

                    <div class="boxGrafico">
                        <canvas id="meuGrafico4"></canvas>
                    </div>

                </div>

                <!-- --------- rede --------- -->



            </div>
        </div>


        <div onclick="fecharCadastrar()" class="fundoCadastrar" id="fundoCadastrar">
            <div class="boxCadastroMaquina" onclick="pararPropagacao()">
                <div class="up">
                    NOVASCAN
                    <div class="topExcluir"><img onclick="fecharCadastrar()" src="img/fechar.svg" alt=""></div>
                </div>
                <div class="down">
                    <div class="topo">
                        <h1>Renomear<br>maquina</h1>
                    </div>
                    <div class="meio">
                        <div class="caixas">
                            <img src="img/Vector (3).svg" alt="">
                            <input type="text" id="nome_input" placeholder="Nome da maquina">
                        </div>
                        <div class="options">
                            <button onclick="atualizarNomeDispositivo()">Renomear</button>
                        </div>
                    </div>
                    <div class="baixo">
                        <img src="img/Logo NovaScan.svg" alt="">
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="js/Maquina/dispositivos.js"></script>

    <script>


        function overview() {
            window.location.href = "overview.html"
        }
        function maquinas() {
            window.location.href = "maquinas.html"
        }
        function editarPerfil() {
            window.location.href = "editar_perfil.html"
        }
        function colaboradores() {
            window.location.href = "colaboradores.html"
        }
        function metricas() {
            window.location.href = "metricas.html"
        }
        function index() {
            window.location.href = "index.html"
        }

        function informacoesMaquinas() {
            const fundoInfomaquina = document.getElementById('informacoesdaMaquina');
            informacoesdaMaquina.style.display = 'flex';
        }

        function voltar() {
            const fundoInformacoesmaquina = document.getElementById('fundoInformacoesmaquina');
            fundoInformacoesmaquina.style.display = 'flex';
            const fundoInfomaquina = document.getElementById('fundoInfomaquina');
            fundoInfomaquina.style.display = 'none';
        }


        // Função para exibir a div fundoInfomaquina
        function maquina() {
            const fundoInformacoesmaquina = document.getElementById('fundoInformacoesmaquina');
            fundoInformacoesmaquina.style.display = 'flex';
        }

        function grafico() {
            const fundoInfomaquina = document.getElementById('fundoInfomaquina');
            const fundoInformacoesmaquina = document.getElementById('fundoInformacoesmaquina');

            // Verifica o estado atual do display e alterna
            if (fundoInfomaquina.style.display === 'none' || fundoInfomaquina.style.display === '') {
                fundoInfomaquina.style.display = 'flex';
                fundoInformacoesmaquina.style.display = 'none';
            } else {
                fundoInfomaquina.style.display = 'none';
                fundoInformacoesmaquina.style.display = 'flex';
            }
        }


        // Função para fechar a div fundoInfomaquina
        function fecharInfomaquina() {
            const fundoInfomaquina = document.getElementById('fundoInfomaquina');
            fundoInfomaquina.style.display = 'none';
            const fundoInformacoesmaquina = document.getElementById('fundoInformacoesmaquina');
            fundoInformacoesmaquina.style.display = 'none';

        }

        function renomear() {
            const fundoCadastrar = document.getElementById('fundoCadastrar');
            fundoCadastrar.style.display = 'flex';

        }

        function fecharCadastrar() {
            const fundoCadastrar = document.getElementById('fundoCadastrar');

            fundoCadastrar.style.display = 'none';

        }


        function pararPropagacao(fecharInfomaquina) {
            event.stopPropagation();

        }


        var lista = [];
        var labels = [];

        const ctx = document.getElementById('meuGrafico').getContext('2d');
        const meuGrafico = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'CPU',
                    data: lista,
                    borderColor: 'rgb(96, 231, 231)',
                    backgroundColor: 'rgba(75, 192, 192, 0.5)',
                    borderWidth: 4,
                    fill: true,
                    pointRadius: 0,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        min: 0,
                        max: 100,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });

        // Loop para atualizar os dados
        for (var i = 0; i < 100; i++) {
            (function (i) {
                setTimeout(function () {

                    const now = new Date();
                    const date = now.toLocaleDateString();
                    const time = now.toLocaleTimeString();





                    var uso = Math.random() * 10 + 20;
                    var velocidade = Math.random() + 1;
                    lista.push(uso.toFixed(0));
                    labels.push(`Hora: ${time}`);

                    // Mantém apenas os últimos 7 pontos no gráfico
                    if (lista.length >= 7) {
                        lista.shift();
                        labels.shift();
                    }


                    meuGrafico.data.datasets[0].data = lista;
                    meuGrafico.data.labels = labels;
                    meuGrafico.update();  // Atualiza o gráfico

                    document.getElementById("usoCPU").innerHTML = uso.toFixed(0) + "%";
                    document.getElementById("velocidade").innerHTML = velocidade.toFixed(1) + "GHz";

                }, i * 2000);
            })(i);
        }



        // --------grafico ram -------------

        var lista2 = [];
        var labels2 = [];

        const ctx2 = document.getElementById('meuGrafico2').getContext('2d');
        const meuGrafico2 = new Chart(ctx2, {
            type: 'line',
            data: {
                labels: labels2,
                datasets: [{
                    label: 'RAM',
                    data: lista2,
                    borderColor: 'rgb(108, 126, 212)',
                    backgroundColor: 'rgba(92, 107, 179, 0.5)',
                    borderWidth: 4,
                    fill: true,
                    pointRadius: 0,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        min: 0,
                        max: 100,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });

        // Loop para atualizar os dados do gráfico RAM (corrigido para usar c)
        for (var c = 0; c < 100; c++) {
            (function (c) {
                setTimeout(function () {
                    const now = new Date();
                    const time = now.toLocaleTimeString();

                    var uso = Math.random() * 10 + 70;
                    var velocidade = Math.random() + 1;
                    lista2.push(uso.toFixed(0));
                    labels2.push(`Hora: ${time}`);



                    var usoRam = (uso.toFixed(0) / 100) * 16;
                    // Mantém apenas os últimos 7 pontos no gráfico
                    if (lista2.length >= 7) {
                        lista2.shift();
                        labels2.shift();
                    }

                    meuGrafico2.data.datasets[0].data = lista2;
                    meuGrafico2.data.labels = labels2;
                    meuGrafico2.update();

                    document.getElementById("usoRAM").innerHTML = uso.toFixed(0) + "%";
                    document.getElementById("RAMemuso").innerHTML = usoRam.toFixed(2) + "GB"

                    RAMemuso
                }, c * 2000);
            })(c);
        }







        var lista3 = [];
        var labels3 = [];

        const ctx3 = document.getElementById('meuGrafico3').getContext('2d');
        const meuGrafico3 = new Chart(ctx3, {
            type: 'line',
            data: {
                labels: labels2,
                datasets: [{
                    label: 'RAM',
                    data: lista2,
                    borderColor: 'rgb(31, 108, 108)',
                    backgroundColor: 'rgb(31, 108, 108, 0.5)',
                    borderWidth: 4,
                    fill: true,
                    pointRadius: 0,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        min: 0,
                        max: 100,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });

        // Loop para atualizar os dados do gráfico RAM (corrigido para usar c)
        for (var c = 0; c < 100; c++) {
            (function (c) {
                setTimeout(function () {
                    const now = new Date();
                    const time = now.toLocaleTimeString();

                    var uso = Math.random() * 10 + 70;
                    var velocidade = Math.random() + 1;
                    lista3.push(uso.toFixed(0));
                    labels3.push(`Hora: ${time}`);



                    var usoRam = (uso.toFixed(0) / 100) * 1024;
                    // Mantém apenas os últimos 7 pontos no gráfico
                    if (lista3.length >= 7) {
                        lista3.shift();
                        labels3.shift();
                    }

                    meuGrafico3.data.datasets[0].data = lista3;
                    meuGrafico3.data.labels = labels3;
                    meuGrafico3.update();

                    document.getElementById("usoMEM").innerHTML = uso.toFixed(0) + "%";
                    document.getElementById("MEMemuso").innerHTML = usoRam.toFixed(2) + "GB"

                    RAMemuso
                }, c * 5000);
            })(c);
        }











        var Listaenviados = [];
        var Listarecebidos = [];
        var labels4 = [];

        const ctx4 = document.getElementById('meuGrafico4').getContext('2d');
        const meuGrafico4 = new Chart(ctx4, {
            type: 'line',
            data: {
                labels: labels4,
                datasets: [
                    {
                        label: 'Enviados',
                        data: Listaenviados,
                        borderColor: 'rgb(248, 100, 199)',
                        backgroundColor: 'rgba(31, 108, 108, 0)',
                        borderWidth: 4,
                        fill: true,
                        pointRadius: 0,
                        borderDash: [10, 5]
                    },
                    {
                        label: 'Recebidos',
                        data: Listarecebidos,
                        borderColor: 'rgb(248, 100, 199, 0.7)',
                        backgroundColor: 'rgb(248, 100, 199, 0.3)',
                        borderWidth: 4,
                        fill: true,
                        pointRadius: 0,
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        min: 0,
                        max: 50,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: true,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });

        // Loop para atualizar os dados do gráfico REDE
        for (var c = 0; c < 100; c++) {
            (function (c) {
                setTimeout(function () {
                    const now = new Date();
                    const time = now.toLocaleTimeString();

                    var enviados = Math.random() * 10;
                    var recebidos = Math.random() * 10 + 5;
                    var perdidos = Math.random() * 5; // Exemplo: valor aleatório para perdidos

                    // Adicionar valores às listas
                    Listaenviados.push(enviados.toFixed(0));
                    Listarecebidos.push(recebidos.toFixed(0));
                    labels4.push(`Hora: ${time}`);

                    // Mantém apenas os últimos 7 pontos no gráfico
                    if (Listaenviados.length >= 7) {
                        Listaenviados.shift();
                        Listarecebidos.shift();
                        labels4.shift();
                    }

                    // Atualizar os dados do gráfico
                    meuGrafico4.data.datasets[0].data = Listaenviados;
                    meuGrafico4.data.datasets[1].data = Listarecebidos;
                    meuGrafico4.data.labels = labels4;
                    meuGrafico4.update();

                    // Atualizar o conteúdo dos elementos HTML
                    document.getElementById("enviados").innerHTML = enviados.toFixed(2) + "Mb";
                    document.getElementById("recebidos").innerHTML = recebidos.toFixed(2) + "Mb";
                    document.getElementById("perdidos").innerHTML = perdidos.toFixed(2) + "%";
                }, c * 2000);
            })(c);
        }



    </script>

</body>

</html>