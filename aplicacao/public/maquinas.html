<!DOCTYPE html>
<html lang="en">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maquinas - Dashboard</title>

    <link rel="stylesheet" href="./css/maquinas.css">
    <link rel="stylesheet" href="./css/navBarDash.css">

    <!-- FONTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body onload="listarMaquinas()">
    <div class="pgMaquinas">

        <div class="NavBar">
            <div class="topNavBar">
                NOVASCAN
            </div>
            <div class="midNavBar">
                <div class="links" onclick="overview()">
                    <img src="./img/overview.svg" alt="">
                    <a href="overview.html">Overview</a>
                </div>
                <div class="links" onclick="maquinas()">
                    <img src="./img/selfchekout.svg" alt="">
                    <a href="maquinas.html">Self-Checkouts</a>
                </div>
                <div class="links" onclick="colaboradores()">
                    <img src="./img/colaboradores.svg" alt="">
                    <a href="colaboradores.html">Colaboradores</a>
                </div>
                <div class="links" onclick="editarPerfil()">
                    <img src="./img/editPerfil.svg" alt="">
                    <a href="editar_perfil.html">Editar Perfil</a>
                </div>
                <div class="links" onclick="metricas()">
                    <img src="./img/metricas.svg" alt="">
                    <a href="#">Personalizar alertas</a>
                </div>
                <div class="links" onclick="picos()">
                    <img src="./img/picos.svg" alt="">
                    <a href="#">Monitoramento Uptime e Downtime</a>
                </div>
            </div>
            <div class="lowNavBar">
                <img src="./img/LogoBranca.svg" class="imgLow">
                <div class="links" onclick="index()">
                    <img src="./img/sair.svg" alt="">
                    <a href="#">Logout</a>
                </div>
            </div>
        </div>
        <div class="conteudoMaquinas" id="conteudoMaquinas">
            <div class="topmaquinas">
                <h2>Máquinas Self-Checkout</h2>
                <!-- <select name="" id="" class="btn-topmaquinas">
                    <option value="0" selected>Selecione uma opção</option>
                    <option value="1">CPU</option>
                    <option value="2">RAM</option>
                    <option value="3">Disco</option>
                    <option value="4">Rede</option>
                </select> -->
            </div>
            <div class="boxmaquinas" id="boxmaquinas">
                <!-- <div class="maquinasOK" onclick="maquina()">
                    <p>Self-Checkout 1</p>
                    <img src="./img/ok.svg" class="imgMaquina" alt="">
                </div> -->
                <!--
                <div class="maquinasOK" onclick="maquina()">
                    <p>Self-Checkout 2</p>
                    <img src="./img/ok.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinasOK" onclick="maquina()">
                    <p>Self-Checkout 3</p>
                    <img src="./img/ok.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinasOK" onclick="maquina()">
                    <p>Self-Checkout 4</p>
                    <img src="./img/ok.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 5</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 6</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 7</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 8</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Self-Checkout 9</p>
                    <img src="./img/alert.svg" class="imgMaquina" alt="">
                </div> -->
            </div>
        </div>
        <div class="GraficoAlerta" id="GraficoAlerta" onload="listarMaquinas">
            <button onclick="VoltarInfoMaquina()" class="btn-voltar"><img src="./img/voltar.svg" alt="">Voltar</button>

            <div class="topmaquinas2" id="topGraficoAlerta">
                <h2>Histórico do dia da máquina<h2 id="nomeMaquina"></h2></h2>
                
            </div>
            <!-- <div class="descricaoGrafico" id="descricaoGrafico">
                <div class="divData">Data: <p id="listaData"></p></div>
            </div> -->
            <div class="descricaoGrafico" id="descricaoGrafico">
                <div class="divProblema"><Strong>Problema: </Strong><p id="descricao"></p></div>
                <div class="divDataHora"><strong>Data e Hora do primeiro pico mais alto:</strong><p id="intervalo_inicio"></p></div>
                
            </div>

            <div class="medGraficoAlerta" id="medGraficoAlerta">

                <title>Gráfico de Uso de CPU</title>
                <div id="chartContainer">
                    <canvas id="cpuChart"></canvas>
                </div>
            </div>

            <div class="fimGraficoAlerta" id="fimGraficoAlerta">
                <!-- <div class="infoFimGraficoAlerta" >
                    <p id="descricao"><strong>Problema:</strong> </p>
                    <p id="intervalo_inicio"><strong >Data e Hora:</strong> </p>
                </div> -->
            </div>
            

        </div>


        <div onclick="fecharInfomaquina()" class="fundoInformacoesmaquina" id="fundoInformacoesmaquina">
            <div class="informacoesdaMaquina" onclick="pararPropagacao()">
                <!-- <div class="box-btn">
                    <button onclick="renomear()" class="btn-renomearSelf">Renomear Self-Checkout <img
                            src="./img/rename.svg" alt=""></button>
                    <button class="btn-ativar" onclick="ativarDispositivo()"> Ativar máquina </button>
                    <button class="btn-desativar" onclick="desativarDispositivo()"> Desativar máquina </button>
                    <button class="btn-renomearSelf" onclick="grafico()"> Monitoramento em tempo real </button>
                </div> -->
                <div class="box-informacoes">
                    <div class="left-informacoes" id="informacoes">
                        <h2>Informações máquina</h2>
                        <div class="top-info" id="top-info">
                            <!-- <p> <strong>Nome da máquina:</strong> Self-Checkout 1</p>
                            <p> <strong>Processador</strong> Intel i5 - 3470</p>
                            <p> <strong>Total Núcleos:</strong> 4 Núcleos</p>
                            <p> <strong>Total Mémoria Ram:</strong> 16 GB</p>
                            <p> <strong>Total Armazenamento:</strong> 1024 GB</p> -->
                        </div>
                        <h2>Alertas associados</h2>
                        <div class="low-info" id="low-info">

                        </div>
                    </div>
                    <div class="right-informacoes" id="right-informacoes">
                    <button onclick="renomear()" class="btn-renomearSelf">Renomear Self-Checkout <img
                            src="./img/rename.svg" alt=""></button>
                    <button class="btn-ativar" onclick="ativarDispositivo()"> Ativar máquina </button>
                    <button class="btn-desativar" onclick="desativarDispositivo()"> Desativar máquina </button>
                    <button class="btn-renomearSelf" onclick="grafico()"> Monitoramento em tempo real </button>
                    </div>
                </div>
            </div>
        </div>

        <div onclick="fecharInfomaquina()" class="fundoInfomaquina" id="fundoInfomaquina">
            <div class="infomaquina" onclick="pararPropagacao()">

                <!-- ------ cpu -------- -->
                <div class="box-btn-voltar">
                    <button onclick="voltar()" class="btn-voltar"><img src="./img/voltar.svg" alt=""> Voltar
                    </button>
                </div>
                <div class="top-Graficos">
                    <div class="bom">
                        <img src="./img/bom.svg" alt="">
                        BOM
                    </div>
                    <div class="cuidado">
                        <img src="./img/cuidado.svg" alt="">
                        CUIDADO
                    </div>
                    <div class="ruim">
                        <img src="./img/ruim.svg" alt="">
                        RUIM
                    </div>

                </div>
                <div class="graficos-Tempo-Real">

                    <div class="graficoCPU" id="graficoCPU">
                        <div class="info-dispositivo">
                            <div class="uso-atual" id="USO-CPU">

                            </div>
                            <div class="qtd-uso" id="velocidade-CPU">

                            </div>
                            <div class="qtd-total">
                                <p>Nucleos</p>
                                <p><strong>1.5Ghz</strong></p>
                            </div>
                            <div class="status">
                                <p>Status</p>
                                <img src="./img/bom.svg" alt="">
                            </div>

                        </div>
                        <div class="grafico-cpu">
                            <canvas id="meuGrafico"></canvas>
                            <div class="contagemAlertas" id="alertasCPU" onclick="chamarDivAlertas()">

                            </div>
                        </div>
                    </div>

                    <div class="graficoRAM" id="graficoRAM">
                        <div class="info-dispositivo">
                            <div class="uso-atual" id="porcentagemRAM">

                            </div>
                            <div class="qtd-uso" id="USO-RAM">

                            </div>
                            <div class="qtd-total" id="Total-RAM">

                            </div>
                            <div class="status">
                                <p>Status</p>
                                <img src="./img/bom.svg" alt="">
                            </div>

                        </div>
                        <div class="grafico-cpu">
                            <canvas id="meuGrafico2"></canvas>
                            <div class="contagemAlertas" id="alertasRAM" onclick="chamarDivAlertas()">

                            </div>
                        </div>

                    </div>

                    <div class="graficoMEM" id="graficoMEM">
                        <div class="info-dispositivo">
                            <div class="uso-atual" id="porcentagemMemoria">
                                <p>MEM</p>
                                <p><strong>50%</strong> </p>
                            </div>
                            <div class="qtd-uso" id="USO-MEMORIA">
                               
                            </div>
                            <div class="qtd-total" id="total-memoria">
                               
                            </div>
                            <div class="status">
                                <p>Status</p>
                                <img src="./img/bom.svg" alt="">
                            </div>

                        </div>
                        <div class="grafico-cpu">
                            <canvas id="meuGrafico3"></canvas>
                            <div class="contagemAlertas" id="alertasMEM" onclick="chamarDivAlertas()">

                            </div>
                        </div>
                    </div>

                    <div class="graficoREDE" id="graficoREDE">
                        <div class="info-dispositivo">
                            <div class="uso-atual">
                                <p>REDE</p>
                            </div>
                            <div class="qtd-uso" id="Rede-perdidos">

                            </div>
                            <div class="qtd-uso" id="Rede-enviados">

                            </div>
                            <div class="qtd-total" id="Rede-recebidos">

                            </div>
                            <div class="status">
                                <p>Status</p>
                                <img src="./img/bom.svg" alt="">
                            </div>

                        </div>
                        <div class="grafico-cpu">
                            <canvas id="meuGrafico4"></canvas>
                            <div class="contagemAlertas" id="alertasREDE" onclick="chamarDivAlertas()">

                            </div>
                        </div>
                    </div>

                </div>





            </div>


        </div>


        <div onclick="fecharInfomaquina()" class="fundoInfomaquina" id="fundo-alertas">
            <div class="alertas-componentes" onclick="pararPropagacao()">
                <button onclick="voltar2()" class="btn-voltar2"><img src="./img/voltar.svg" alt=""> Voltar aos gráficos
                </button>

                <div class="box-alertas-pai">
                    <div class="alertas-box">
                        <div class="alertas-cpu">
                            <h3>CPU</h3>
                            <div id="alertaDaCPU" class="box-dos-alertas">

                            </div>

                        </div>
                    </div>
                    <div class="alertas-box">
                        <div class="alertas-ram">
                            <h3>RAM</h3>
                            <div id="alertaDaRAM">

                            </div>
                        </div>
                    </div>
                    <div class="alertas-box">
                        <div class="alertas-memoria">
                            <h3>Memória</h3>
                            <div id="alertaDaMemoria">

                            </div>


                        </div>
                    </div>
                    <div class="alertas-box">
                        <div class="alertas-rede">
                            <h3>Rede</h3>
                            <div id="alertaDaREDE">

                            </div>
                        </div>
                    </div>
                </div>




            </div>
        </div>



        <div onclick="fecharCadastrar()" class="fundoCadastrar" id="fundoCadastrar">
            <div class="boxCadastroMaquina" onclick="pararPropagacao()">
                <div class="up">
                    NOVASCAN
                    <div class="topExcluir"><img onclick="fecharCadastrar()" src="img/fechar.svg" alt=""></div>
                </div>
                <div class="down">
                    <div class="topo">
                        <h1>Renomear<br>maquina</h1>
                    </div>
                    <div class="meio">
                        <div class="caixas">
                            <img src="img/Vector (3).svg" alt="">
                            <input type="text" id="nome_input" placeholder="Nome da maquina">
                        </div>
                        <div class="options">
                            <button onclick="atualizarNomeDispositivo()">Renomear</button>
                        </div>
                    </div>
                    <div class="baixo">
                        <img src="img/Logo NovaScan.svg" alt="">
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="js/Maquina/dispositivos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/href.js"></script>

    <script>
        function informacoesMaquinas() {
            const fundoInfomaquina = document.getElementById('informacoesdaMaquina');
            informacoesdaMaquina.style.display = 'flex';
        }

        function voltar() {
            const fundoInformacoesmaquina = document.getElementById('fundoInformacoesmaquina');
            fundoInformacoesmaquina.style.display = 'flex';
            const fundoInfomaquina = document.getElementById('fundoInfomaquina');
            fundoInfomaquina.style.display = 'none';
        }
        function voltar2() {
            const fundoInformacoesmaquina = document.getElementById('fundoInfomaquina');
            fundoInformacoesmaquina.style.display = 'flex';
            const funfoAlertas = document.getElementById('fundo-alertas');
            funfoAlertas.style.display = 'none';
        }

        function grafico() {
            const fundoInfomaquina = document.getElementById('fundoInfomaquina');
            const fundoInformacoesmaquina = document.getElementById('fundoInformacoesmaquina');

            // Verifica o estado atual do display e alterna
            if (fundoInfomaquina.style.display === 'none' || fundoInfomaquina.style.display === '') {
                fundoInfomaquina.style.display = 'flex';
                fundoInformacoesmaquina.style.display = 'none';
            } else {
                fundoInfomaquina.style.display = 'none';
                fundoInformacoesmaquina.style.display = 'flex';
            }

            listandologMaquinas()
        }

        function chamarDivAlertas(){
            const fundoInformacoesmaquina = document.getElementById('fundoInfomaquina');
            fundoInformacoesmaquina.style.display = 'none';
            const funfoAlertas = document.getElementById('fundo-alertas');
            funfoAlertas.style.display = 'flex';
        }


        // Função para fechar a div fundoInfomaquina
        function fecharInfomaquina() {
            const fundoInfomaquina = document.getElementById('fundoInfomaquina');
            fundoInfomaquina.style.display = 'none';
            const fundoInformacoesmaquina = document.getElementById('fundoInformacoesmaquina');
            fundoInformacoesmaquina.style.display = 'none';

        }

        function renomear() {
            const fundoCadastrar = document.getElementById('fundoCadastrar');
            fundoCadastrar.style.display = 'flex';

        }

        function fecharCadastrar() {
            const fundoCadastrar = document.getElementById('fundoCadastrar');

            fundoCadastrar.style.display = 'none';

        }


        function pararPropagacao(fecharInfomaquina) {
            event.stopPropagation();

        }


        function VoltarInfoMaquina() {
            const GraficoAlerta = document.getElementById('GraficoAlerta');
            GraficoAlerta.style.display = 'none';
            const conteudoMaquinas = document.getElementById('conteudoMaquinas');
            conteudoMaquinas.style.display = 'flex';
            const funfoAlertas = document.getElementById('fundo-alertas');
            funfoAlertas.style.display = 'flex';
        }




        // var lista = [];
        // var labels = [];

        const ctx = document.getElementById('meuGrafico').getContext('2d');
        const meuGrafico = new Chart(ctx, {
            type: 'line',
            data: {
                labels: listaCPU,
                datasets: [{
                    label: 'CPU',
                    data: listaCPU,
                    borderColor: 'rgb(96, 231, 231)',
                    backgroundColor: 'rgba(75, 192, 192, 0.5)',
                    borderWidth: 4,
                    fill: true,
                    pointRadius: 0,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        min: 0,
                        max: 100,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });




        const ctx2 = document.getElementById('meuGrafico2').getContext('2d');
        const meuGrafico2 = new Chart(ctx2, {
            type: 'line',
            data: {
                labels: listaRam,
                datasets: [{
                    label: 'RAM',
                    data: listaRam,
                    borderColor: 'rgb(108, 126, 212)',
                    backgroundColor: 'rgba(92, 107, 179, 0.5)',
                    borderWidth: 4,
                    fill: true,
                    pointRadius: 0,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });

       



        const ctx3 = document.getElementById('meuGrafico3').getContext('2d');
        const meuGrafico3 = new Chart(ctx3, {
            type: 'line',
            data: {
                labels: listaMemoria,
                datasets: [{
                    label: 'RAM',
                    data: listaMemoria,
                    borderColor: 'rgb(31, 108, 108)',
                    backgroundColor: 'rgb(31, 108, 108, 0.5)',
                    borderWidth: 4,
                    fill: true,
                    pointRadius: 0,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });









        const ctx4 = document.getElementById('meuGrafico4').getContext('2d');
        const meuGrafico4 = new Chart(ctx4, {
            type: 'line',
            data: {
                labels: pacotesEnviados,
                datasets: [
                    {
                        label: 'Enviados',
                        data: pacotesEnviados,
                        borderColor: 'rgb(248, 100, 199)',
                        backgroundColor: 'rgba(31, 108, 108, 0)',
                        borderWidth: 4,
                        fill: true,
                        pointRadius: 0,
                        borderDash: [10, 5]
                    },
                    {
                        label: 'Recebidos',
                        data: pacotesRecebidos,
                        borderColor: 'rgb(248, 100, 199, 0.7)',
                        backgroundColor: 'rgb(248, 100, 199, 0.3)',
                        borderWidth: 4,
                        fill: true,
                        pointRadius: 0,
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: true,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });

        




    </script>

</body>

</html>