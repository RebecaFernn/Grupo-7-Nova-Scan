<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maquinas - Dashboard</title>

    <link rel="stylesheet" href="./css/maquinas.css">
    <link rel="stylesheet" href="./css/navBarDash.css">

    <!-- FONTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <div class="pgMaquinas">

        <div class="NavBar">
            <div class="topNavBar">
                NOVASCAN
            </div>
            <div class="midNavBar">

                <div class="links">
                    <img src="./img/overview.svg" alt="">
                    <a href="overview.html">Overview</a>
                </div>
                <div class="links">
                    <img src="./img/selfchekout.svg" alt="">
                    <a href="maquinas.html">Self-Checkouts</a>
                </div>
                <div class="links">
                    <img src="./img/colaboradores.svg" alt="">
                    <a href="colaboradores.html">Colaboradores</a>
                </div>
                <div class="links">
                    <img src="./img/editPerfil.svg" alt="">
                    <a href="">Editar Perfil</a>
                </div>
                <div class="links">
                    <img src="./img/mural.svg" alt="">
                    <a href="">Mural</a>
                </div>

            </div>
            <div class="lowNavBar">
                <img src="./img/LogoBranca.svg" class="imgLow">
                <div class="links">
                    <img src="./img/sair.svg" alt="">
                    <a href="#">Logout</a>
                </div>
            </div>

        </div>
        <div class="conteudoMaquinas">

            <div class="topmaquinas">
                <h2>Máquinas Self-Checkout</h2>

            </div>
            <div class="boxmaquinas">
                <div class="maquinas" onclick="maquina()">
                    <p>Maquinas 1</p>
                    <p>(Quando cadastrar aparece automatico)</p>
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Maquinas</p>
                    <p>(Quando cadastrar aparece automatico)</p>
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Maquinas</p>
                    <p>(Quando cadastrar aparece automatico)</p>
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Maquinas</p>
                    <p>(Quando cadastrar aparece automatico)</p>
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Maquinas</p>
                    <p>(Quando cadastrar aparece automatico)</p>
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Maquinas</p>
                    <p>(Quando cadastrar aparece automatico)</p>
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Maquinas</p>
                    <p>(Quando cadastrar aparece automatico)</p>
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Maquinas</p>
                    <p>(Quando cadastrar aparece automatico)</p>
                </div>
                <div class="maquinas" onclick="maquina()">
                    <p>Maquinas</p>
                    <p>(Quando cadastrar aparece automatico)</p>
                </div>
            </div>

        </div>

        <div onclick="fecharInfomaquina()" class="fundoInfomaquina" id="fundoInfomaquina">
            <div class="infomaquina" onclick="pararPropagacao()">
                <button onclick="renomear()" class="btn-renomearSelf">Renomear Self-Checkout <img src="./img/rename.svg"
                        alt=""></button>
                <!-- ------ cpu -------- -->

                <div class="boxInfoCPU">
                    <div class="boxFichaCPU">

                        <div class="CPU" id="CPU">
                            <div class="tituloCPU">
                                <h2>CPU</h2>
                            </div>

                            <div class="usoCPU" id="usoCPU">

                            </div>
                        </div>

                        <div class="boxVelocidade">
                            <div class="tituloVelocidade">
                                Velocidade
                            </div>
                            <div class="velocidade" id="velocidade">

                            </div>
                        </div>
                        <div class="boxNucleos">
                            <div class="titulosNucleos">
                                Nucleos lógicos
                            </div>
                            <div class="qtdNucleos">
                                4
                            </div>
                        </div>
                    </div>

                    <div class="boxGrafico">
                        <canvas id="meuGrafico"></canvas>
                    </div>

                </div>

                <!-- MEMÓRIA RAM -->
                <div class="boxInfoCPU">
                    <div class="boxFichaCPU">

                        <div class="CPU" id="CPU">
                            <div class="tituloCPU">
                                <h2>RAM</h2>
                            </div>

                            <div class="usoCPU" id="usoRAM">

                            </div>
                        </div>

                        <div class="boxVelocidade">
                            <div class="tituloVelocidade">
                                Em uso
                            </div>
                            <div class="velocidade" id="RAMemuso">
                                8
                            </div>
                        </div>
                        <div class="boxNucleos">
                            <div class="titulosNucleos">
                                Total
                            </div>
                            <div class="qtdNucleos">
                                16
                            </div>
                        </div>
                    </div>

                    <div class="boxGrafico">
                        <canvas id="meuGrafico2"></canvas>
                    </div>

                </div>

                <!-- ARMAZENAMENTO -->
                <!-- <div class="boxInfoCPU">
                    <div class="boxFichaCPU">

                        <div class="CPU" id="CPU">
                            <div class="tituloCPU">
                                <h2>MEM</h2>
                            </div>

                            <div class="usoCPU" id="usoCPU">

                            </div>
                        </div>

                        <div class="boxVelocidade">
                            <div class="tituloVelocidade">
                                Velocidade
                            </div>
                            <div class="velocidade" id="velocidade">

                            </div>
                        </div>
                        <div class="boxNucleos">
                            <div class="titulosNucleos">
                                Nucleos lógicos
                            </div>
                            <div class="qtdNucleos">
                                4
                            </div>
                        </div>
                    </div>

                    <div class="boxGrafico">
                        <canvas id="meuGrafico"></canvas>
                    </div>

                </div>
                <div class="boxInfoCPU">
                    <div class="boxFichaCPU">

                        <div class="CPU" id="CPU">
                            <div class="tituloCPU">
                                <h2>CPU</h2>
                            </div>

                            <div class="usoCPU" id="usoCPU">

                            </div>
                        </div>

                        <div class="boxVelocidade">
                            <div class="tituloVelocidade">
                                Velocidade
                            </div>
                            <div class="velocidade" id="velocidade">

                            </div>
                        </div>
                        <div class="boxNucleos">
                            <div class="titulosNucleos">
                                Nucleos lógicos
                            </div>
                            <div class="qtdNucleos">
                                4
                            </div>
                        </div>
                    </div>

                    <div class="boxGrafico">
                        <canvas id="meuGrafico"></canvas>
                    </div>

                </div> -->

                <!-- --------- rede --------- -->



            </div>
        </div>


        <div onclick="fecharCadastrar()" class="fundoCadastrar" id="fundoCadastrar">
            <div class="boxCadastroMaquina" onclick="pararPropagacao()">
                <div class="up">
                    NOVASCAN
                    <div class="topExcluir"><img onclick="fecharCadastrar()" src="img/fechar.svg" alt=""></div>
                </div>
                <div class="down">
                    <div class="topo">
                        <h1>Renomear<br>maquina</h1>
                    </div>
                    <div class="meio">
                        <div class="caixas">
                            <img src="img/Vector (3).svg" alt="">
                            <input type="text" id="nome_input" placeholder="Nome da maquina">
                        </div>
                        <div class="options">
                            <button>Renomear</button>
                        </div>
                    </div>
                    <div class="baixo">
                        <img src="img/Logo NovaScan.svg" alt="">
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Função para exibir a div fundoInfomaquina
        function maquina() {
            const fundoInfomaquina = document.getElementById('fundoInfomaquina');
            fundoInfomaquina.style.display = 'flex';
        }

        // Função para fechar a div fundoInfomaquina
        function fecharInfomaquina() {
            const fundoInfomaquina = document.getElementById('fundoInfomaquina');

            fundoInfomaquina.style.display = 'none';

        }

        function renomear() {
            const fundoCadastrar = document.getElementById('fundoCadastrar');

            fundoCadastrar.style.display = 'flex';

        }

        function fecharCadastrar() {
            const fundoCadastrar = document.getElementById('fundoCadastrar');

            fundoCadastrar.style.display = 'none';

        }


        function pararPropagacao(fecharInfomaquina) {
            event.stopPropagation(); //Não deixa fechar a div ao clicar, se tirar isso a div some ao clicar nela.

        }


        var lista = [];
        var labels = [];

        const ctx = document.getElementById('meuGrafico').getContext('2d');
        const meuGrafico = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'CPU',
                    data: lista,
                    borderColor: 'rgb(96, 231, 231)',
                    backgroundColor: 'rgba(75, 192, 192, 0.5)',
                    borderWidth: 4,
                    fill: true,
                    pointRadius: 0,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        min: 0,
                        max: 100,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });

        // Loop para atualizar os dados
        for (var i = 0; i < 100; i++) {
            (function (i) {
                setTimeout(function () {

                    const now = new Date();
                    const date = now.toLocaleDateString();
                    const time = now.toLocaleTimeString();





                    var uso = Math.random() * 10 + 20;
                    var velocidade = Math.random() + 1;
                    lista.push(uso.toFixed(0));
                    labels.push(`Hora: ${time}`);

                    // Mantém apenas os últimos 7 pontos no gráfico
                    if (lista.length >= 7) {
                        lista.shift();
                        labels.shift();
                    }


                    meuGrafico.data.datasets[0].data = lista;
                    meuGrafico.data.labels = labels;
                    meuGrafico.update();  // Atualiza o gráfico

                    document.getElementById("usoCPU").innerHTML = uso.toFixed(0) + "%";
                    document.getElementById("velocidade").innerHTML = velocidade.toFixed(1) + "GHz";

                }, i * 2000);
            })(i);
        }



        // --------grafico ram -------------

        var lista2 = [];
        var labels2 = [];

        const ctx2 = document.getElementById('meuGrafico2').getContext('2d');
        const meuGrafico2 = new Chart(ctx2, {
            type: 'line',
            data: {
                labels: labels2,
                datasets: [{
                    label: 'RAM',
                    data: lista2,
                    borderColor: 'rgb(108, 126, 212)',
                    backgroundColor: 'rgba(92, 107, 179, 0.5)',
                    borderWidth: 4,
                    fill: true,
                    pointRadius: 0,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        min: 0,
                        max: 100,
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 14,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                        labels: {
                            font: {
                                size: 16,
                                weight: 'bold',
                                family: 'Montserrat'
                            }
                        }
                    }
                }
            }
        });

        // Loop para atualizar os dados do gráfico RAM (corrigido para usar c)
        for (var c = 0; c < 100; c++) {
            (function (c) {
                setTimeout(function () {
                    const now = new Date();
                    const time = now.toLocaleTimeString();

                    var uso = Math.random() * 10 + 70;
                    var velocidade = Math.random() + 1;
                    lista2.push(uso.toFixed(0));
                    labels2.push(`Hora: ${time}`);



                    var usoRam = (uso.toFixed(0) / 100) * 16;
                    // Mantém apenas os últimos 7 pontos no gráfico
                    if (lista2.length >= 7) {
                        lista2.shift();
                        labels2.shift();
                    }

                    meuGrafico2.data.datasets[0].data = lista2;
                    meuGrafico2.data.labels = labels2;
                    meuGrafico2.update();

                    document.getElementById("usoRAM").innerHTML = uso.toFixed(0) + "%";
                    document.getElementById("RAMemuso").innerHTML = usoRam.toFixed(2) + "GB"

                    RAMemuso
                }, c * 2000);
            })(c);
        }


    </script>

</body>

</html>